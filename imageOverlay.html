<!DOCTYPE html>
<html>
<head>
  <title>Google Maps Image Overlay</title>
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    let map;
    let rectangle;
    let groundOverlay;

    function initMap() {
      // Initialize the map
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 41.8780, lng: -93.0977 }, // IOWA
        zoom: 10,
      });

      // Define the initial bounds of the rectangle
      const bounds = {
        north: 42.1, // Northern latitude
        south: 41.7, // Southern latitude
        east: -92.8, // Eastern longitude
        west: -93.5, // Western longitude
      };

      // Create a draggable rectangle
      rectangle = new google.maps.Rectangle({
        bounds: bounds,
        editable: true,
        draggable: true,
        map: map,
      });

      // Create the initial ground overlay
      groundOverlay = new google.maps.GroundOverlay(
        "https://databasin2-filestore.s3.amazonaws.com/639389ad6ae749da8c117952c3af75f2/images/preview.png?v=1310509685",
        bounds,
        {
          opacity: 1, // Adjust transparency
        }
      );
      groundOverlay.setMap(map);

      // Update the overlay when the rectangle's bounds change
      rectangle.addListener("bounds_changed", updateOverlay);
    }

    function updateOverlay() {
      const bounds = rectangle.getBounds();

      // Remove the existing overlay
      if (groundOverlay) {
        groundOverlay.setMap(null);
      }

      // Add a new overlay with updated bounds
      groundOverlay = new google.maps.GroundOverlay(
        "https://databasin2-filestore.s3.amazonaws.com/639389ad6ae749da8c117952c3af75f2/images/preview.png?v=1310509685",
        bounds,
        {
          opacity: 1, // Adjust transparency
        }
      );
      groundOverlay.setMap(map);
    }

    // Load the Google Maps script
    const script = document.createElement("script");
    script.src =
      "https://maps.googleapis.com/maps/api/js?key=AIzaSyCJYWyMSK4rLfYj1I3HPtyU-pjlod_DEhU&callback=initMap";
    script.async = true;
    script.defer = true;
    document.head.appendChild(script);
  </script>
</body>
</html>
