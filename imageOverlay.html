<!DOCTYPE html>
<html>
<head>
  <title>Google Maps Image Overlay</title>
  <style>
    #map {
      height: 100vh;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    let map;
    let rectangle;
    let groundOverlay;

    function initMap() {
      // Initialize the map
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 37.7749, lng: -122.4194 }, // San Francisco
        zoom: 10,
      });

      // Define the initial bounds of the rectangle
      const bounds = {
        north: 37.8,
        south: 37.7,
        east: -122.4,
        west: -122.5,
      };

      // Create a draggable rectangle
      rectangle = new google.maps.Rectangle({
        bounds: bounds,
        editable: true,
        draggable: true,
        map: map,
      });

      // Create the initial ground overlay
      groundOverlay = new google.maps.GroundOverlay(
        "https://via.placeholder.com/500x500.png?text=Overlay+Image",
        bounds,
        {
          opacity: 1, // Adjust transparency
        }
      );
      groundOverlay.setMap(map);

      // Update the overlay when the rectangle's bounds change
      rectangle.addListener("bounds_changed", updateOverlay);
    }

    function updateOverlay() {
      const bounds = rectangle.getBounds();

      // Remove the existing overlay
      if (groundOverlay) {
        groundOverlay.setMap(null);
      }

      // Add a new overlay with updated bounds
      groundOverlay = new google.maps.GroundOverlay(
        "https://via.placeholder.com/500x500.png?text=Overlay+Image",
        bounds,
        {
          opacity: 1, // Adjust transparency
        }
      );
      groundOverlay.setMap(map);
    }

    // Load the Google Maps script dynamically
    const script = document.createElement("script");
    script.src =
      "https://maps.googleapis.com/maps/api/js?key=AIzaSyCJYWyMSK4rLfYj1I3HPtyU-pjlod_DEhU&callback=initMap";
    script.async = true;
    script.defer = true;
    document.head.appendChild(script);
  </script>
</body>
</html>
